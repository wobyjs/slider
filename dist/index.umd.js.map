{"version":3,"file":"index.umd.js","sources":["../src/utils.tsx","../src/slider.tsx"],"sourcesContent":["/**\r\n * Capitalize first letter of string\r\n * @private\r\n * @param  {string} - String\r\n * @return {string} - String with first letter capitalized\r\n */\r\nexport function capitalize(str: string): string {\r\n    return str.charAt(0).toUpperCase() + str.substr(1)\r\n}\r\n\r\n/**\r\n * Clamp position between a range\r\n * @param  {number} - Value to be clamped\r\n * @param  {number} - Minimum value in range\r\n * @param  {number} - Maximum value in range\r\n * @return {number} - Clamped value\r\n */\r\nexport function clamp(value, min, max) {\r\n    return Math.min(Math.max(value, min), max)\r\n}\r\n","import { $, $$, useEffect, useMemo, ObservableMaybe, type JSX, ObservableReadonly, Observable, Child } from 'woby'\r\nimport { capitalize, clamp } from \"./utils\"\r\n\r\n// /https://whoisandy.github.io/react-rangeslider/\r\n\r\ntype Orientation = \"horizontal\" | \"vertical\"\r\n\r\ninterface SliderProps {\r\n    min?: ObservableMaybe<number>\r\n    max?: ObservableMaybe<number>\r\n    step?: ObservableMaybe<number>\r\n    value?: Observable<number>\r\n    orientation?: ObservableMaybe<Orientation>\r\n    tooltip?: ObservableMaybe<boolean>\r\n    alwaysOnTooltip?: ObservableMaybe<boolean>\r\n    reverse?: ObservableMaybe<boolean>\r\n    labels?: ObservableMaybe<Record<string, JSX.Child>>\r\n    formatLabel?: ObservableMaybe<number>\r\n    formatTooltip?: (value: ObservableMaybe<number>) => JSX.Child\r\n    onChangeStart?: (e: MouseEvent | TouchEvent) => void\r\n    onChange?: (value: number, e: MouseEvent | TouchEvent | KeyboardEvent) => void\r\n    onChangeComplete?: (e: MouseEvent | TouchEvent) => void\r\n    class?: ObservableMaybe<string>\r\n    className?: ObservableMaybe<string>\r\n}\r\n\r\nconst constants = {\r\n    orientation: {\r\n        horizontal: {\r\n            dimension: \"width\",\r\n            direction: \"left\",\r\n            reverseDirection: \"right\",\r\n            coordinate: \"x\",\r\n        },\r\n        vertical: {\r\n            dimension: \"height\",\r\n            direction: \"top\",\r\n            reverseDirection: \"bottom\",\r\n            coordinate: \"y\",\r\n        },\r\n    },\r\n}\r\n\r\nexport const Slider = (props: SliderProps & JSX.HTMLAttributes<HTMLDivElement>) => {\r\n    const {\r\n        min = $(0),\r\n        max = $(100),\r\n        step = $(1),\r\n        value = $(0),\r\n        orientation = $(\"horizontal\"),\r\n        tooltip = $(true),\r\n        alwaysOnTooltip = $(false),\r\n        reverse = $(false),\r\n        labels = $({}),\r\n        formatLabel = $(\"\"),\r\n        formatTooltip,\r\n        onChangeStart,\r\n        onChange,\r\n        onChangeComplete,\r\n    } = props\r\n\r\n    const active = $<boolean>(false)\r\n    const limit = $<number>(0)\r\n    const grab = $<number>(0)\r\n    const sliderRef = $<HTMLDivElement>()\r\n    const handleRef = $<HTMLDivElement>()\r\n    const tooltipRef = $<HTMLDivElement>()\r\n    const labelsRef = $<HTMLUListElement>()\r\n    const sliderValue = $($$(value))\r\n    const sliderDim = $(0)\r\n    const handleDim = $(0)\r\n\r\n    useEffect(() => {\r\n        sliderValue($$(value))\r\n    })\r\n    const handleTooltip = (value: number): JSX.Child => {\r\n        return formatTooltip ? formatTooltip(value) : value\r\n    }\r\n\r\n    const handleUpdate = () => {\r\n        if (!$$(sliderRef) || !$$(handleRef)) {\r\n            return\r\n        }\r\n        const dimension = capitalize(constants.orientation[$$(orientation)].dimension)\r\n        sliderDim($$(sliderRef)[`offset${$$(dimension)}`])\r\n        handleDim($$(handleRef)[`offset${$$(dimension)}`])\r\n\r\n        limit(sliderDim() - handleDim())\r\n        grab(handleDim() / 2)\r\n    }\r\n\r\n    const handleStart = (e: MouseEvent | TouchEvent) => {\r\n        document.addEventListener(\"mousemove\", handleDrag)\r\n        document.addEventListener(\"mouseup\", handleEnd)\r\n        active(true)\r\n        onChangeStart?.(e)\r\n    }\r\n\r\n    const handleDrag = (e: MouseEvent | TouchEvent) => {\r\n        e.stopPropagation()\r\n        if (!onChange) return\r\n\r\n        const {\r\n            //@ts-ignore\r\n            target: { className, classList, dataset },\r\n        } = e\r\n\r\n        if (className === \"rangesliderLabels\") return\r\n\r\n        sliderValue(position(e))\r\n\r\n        if (classList?.contains(\"rangesliderLabel-item\") && dataset.value) {\r\n            sliderValue(parseFloat(dataset.value))\r\n        }\r\n        onChange?.($$(sliderValue), e)\r\n    }\r\n\r\n    useEffect(() => {\r\n        handleUpdate()\r\n        const resizeObserver = new ResizeObserver(handleUpdate)\r\n        if ($$(sliderRef)) {\r\n            resizeObserver.observe($$(sliderRef))\r\n        }\r\n\r\n        return () => {\r\n            resizeObserver.disconnect()\r\n        }\r\n    })\r\n\r\n    const handleEnd = (e: MouseEvent | TouchEvent) => {\r\n        active(false)\r\n        onChangeComplete?.(e)\r\n        value($$(sliderValue))\r\n        document.removeEventListener(\"mousemove\", handleDrag)\r\n        document.removeEventListener(\"mouseup\", handleEnd)\r\n    }\r\n\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n        e.preventDefault()\r\n        const { keyCode } = e\r\n        // let sliderValue\r\n\r\n        switch (keyCode) {\r\n            case 38:\r\n            case 39:\r\n                sliderValue((+$$(value)) + (+$$(step)) > (+$$(max)) ? (+$$(max)) : (+$$(value)) + (+$$(step)))\r\n                onChange?.($$(sliderValue), e)\r\n                break\r\n            case 37:\r\n            case 40:\r\n                sliderValue((+$$(value)) - (+$$(step)) < (+$$(min)) ? (+$$(min)) : (+$$(value)) - (+$$(step)))\r\n                onChange?.($$(sliderValue), e)\r\n                break\r\n            default:\r\n        }\r\n    }\r\n\r\n    const getPositionFromValue = (value: number, isLabel = false): number => {\r\n        const diffMaxMin = (+$$(max)) - (+$$(min))\r\n        const diffValMin = value - (+$$(min))\r\n        const percentage = diffValMin / diffMaxMin\r\n        // const pos = Math.round(percentage * ($$(limit) +\r\n        //     ($$(reverse) ?\r\n        //         ($$(isHorizontal) ? 0 : +$$(grab) * 2) :\r\n        //         ($$(isHorizontal) ? 0 : 0))\r\n        // ) - ($$(reverse) ?\r\n        //     ($$(isHorizontal) ? $$(grab) * 2 : -$$(grab) * 2) :\r\n        //     ($$(isHorizontal) ? $$(grab) * 2 : 0))\r\n        // )\r\n        const pos = Math.round(percentage * (isLabel ? (+$$(sliderDim)) : (+$$(limit))))\r\n\r\n        return pos\r\n    }\r\n\r\n    const isHorizontal = useMemo(() => $$(orientation) === 'horizontal')\r\n\r\n    const getValueFromPosition = (pos: number): number => {\r\n        const percentage = clamp(pos, 0, (+$$(limit))) / ((+$$(limit)) || 1)\r\n        const baseVal = (+$$(step)) * Math.round((percentage * ((+$$(max)) - (+$$(min)))) / (+$$(step)))\r\n        const result = $$(isHorizontal) ? baseVal + (+$$(min)) : (+$$(max)) - baseVal\r\n        return clamp(result, (+$$(min)), (+$$(max)))\r\n    }\r\n\r\n    const position = (e: MouseEvent | TouchEvent) => {\r\n        const coordinateStyle = constants.orientation[$$(orientation)].coordinate\r\n        const directionStyle = $$(reverse)\r\n            ? constants.orientation[$$(orientation)].reverseDirection\r\n            : constants.orientation[$$(orientation)].direction\r\n        const clientCoordinateStyle = `client${capitalize(coordinateStyle)}`\r\n        const coordinate = !(\"touches\" in e)\r\n            ? (e as MouseEvent)[clientCoordinateStyle]\r\n            : (e.touches[0] as Touch)[clientCoordinateStyle]\r\n        const direction = $$(sliderRef)!.getBoundingClientRect()[directionStyle]\r\n        // const pos = $$(reverse)\r\n        //     ? ($$(isHorizontal) ? (direction - coordinate) : ($$(limit) - (direction - coordinate /* - ($$(grab) * 2) */)))\r\n        //     : $$(limit) - (coordinate - direction + ($$(grab)))\r\n\r\n        const pos = $$(reverse)\r\n            ? direction - coordinate - (+$$(grab))\r\n            : coordinate - direction - (+$$(grab))\r\n\r\n        sliderValue(getValueFromPosition(pos))\r\n        return sliderValue\r\n    }\r\n\r\n    const coordinates = (pos: number, isLabel = false) => {\r\n        const value = getValueFromPosition(pos)\r\n        const position = getPositionFromValue(value, isLabel)\r\n        // const handlePos = $$(reverse) ?\r\n        //     ($$(isHorizontal) ? ($$(limit) - position + ($$(grab))) : ($$(limit) - position + ($$(grab)))) :\r\n        //     ($$(isHorizontal) ? ($$(limit) - position - $$(grab)) : ($$(limit) - position - $$(grab)))\r\n        // const fillPos = $$(reverse) ?\r\n        //     ($$(isHorizontal) ? handlePos + $$(grab) : $$(limit) - handlePos) :\r\n        //     ($$(isHorizontal) ? $$(limit) - handlePos : handlePos)\r\n\r\n        const handlePos = $$(isHorizontal) ? position + (+$$(grab)) : position\r\n        const fillPos = $$(isHorizontal) ? handlePos : (+$$(limit)) - handlePos\r\n\r\n        // console.log('coords', pos, value, position, handlePos, fillPos)\r\n        return {\r\n            fill: fillPos,\r\n            handle: handlePos,\r\n            label: handlePos\r\n        }\r\n    }\r\n\r\n    const renderLabels = (labels: ObservableReadonly<Record<string, JSX.Child>>) => (\r\n        <ul ref={labelsRef} class={[\"rangesliderLabels relative select-none\",\r\n            () => $$(isHorizontal) ? 'left-[-15px] top-[20px]' : 'left-[15px] top-[8px]'\r\n        ]}\r\n        >\r\n            {Object.values($$(labels))}\r\n        </ul >\r\n    )\r\n\r\n\r\n    const labelItems = useMemo(() => {\r\n        const _l = $$(limit)\r\n\r\n        let labelItems = []\r\n        let labelKeys = Object.keys($$(labels)).map(r => +r)\r\n\r\n        if (labelKeys.length > 0) {\r\n            labelKeys = labelKeys.sort((a, b) => ($$(reverse) ? a - b : b - a))\r\n\r\n            for (let key of labelKeys) {\r\n                const labelPosition = getPositionFromValue(key)\r\n                // const labelPosition2 = getPositionFromValue(key)\r\n                const labelCoords = coordinates(labelPosition, !$$(isHorizontal))\r\n                const labelStyle = {\r\n                    [constants.orientation[$$(orientation)].direction]: `${labelCoords.label}px`\r\n                }\r\n\r\n                console.log('labels', $$(limit), labelCoords.label)\r\n\r\n                labelItems.push(\r\n                    <li\r\n                        class={[\r\n                            //`\r\n\r\n                            // absolute text-sm cursor-pointer inline-block top-2.5 \r\n                            // [transform:translate3d(-50%,0,0)]\r\n                            //   `,\r\n                            `rangesliderLabel-item  absolute`,\r\n                            () => $$(isHorizontal) ? '' : `list-none text-left h-full ml-6 mr-0 my-0 p-0\r\n                            before:content-[''] before:w-[10px] before:h-[1px] before:absolute before:z-[1] before:-left-3.5 before:top-2/4\r\n                            before:[transform:translate3d(0,-50%,0)] before:bg-[black] list-none`\r\n                        ]}\r\n                        data-value={key}\r\n                        // onMouseDown={handleDrag}\r\n                        onPointerDown={handleStart}\r\n                        onPointerUp={handleEnd}\r\n                        style={labelStyle}\r\n                    >\r\n                        {$$(labels)[key]}\r\n                    </li>\r\n                )\r\n            }\r\n        }\r\n        return labelItems\r\n    })\r\n\r\n\r\n    const showTooltip = useMemo(() => $$(tooltip) && ($$(active) || $$(alwaysOnTooltip)))\r\n\r\n    const coords = useMemo(() => {\r\n        const positionVal = getPositionFromValue($$(sliderValue))\r\n        return coordinates($$(positionVal))\r\n    })\r\n    const fillStyle = useMemo(() => {\r\n        const dimension = constants.orientation[$$(orientation)].dimension\r\n        return { [$$(dimension)]: `${$$(coords).fill}px` }\r\n    })\r\n    const handleStyle = useMemo(() => {\r\n        const direction = useMemo(() => $$(reverse)\r\n            ? constants.orientation[$$(orientation)].reverseDirection\r\n            : constants.orientation[$$(orientation)].direction)\r\n        return { [$$(direction)]: `${$$(coords).handle}px` }\r\n    })\r\n\r\n    return (\r\n        <div\r\n            ref={sliderRef}\r\n            class={[\r\n                \"rangeslider relative bg-[#e6e6e6] touch-none mx-0 my-5\",\r\n                () => `rangeslider-${$$(orientation)}`,\r\n                () => $$(reverse) ? \"rangeslider-reverse\" : \"\",\r\n                () => $$(isHorizontal) ? 'h-3 rounded-[10px]' :\r\n                    'h-[150px] max-w-[10px] mx-auto my-5',\r\n                props.class ?? props.className,\r\n            ]}\r\n            onMouseDown={handleDrag}\r\n            onMouseUp={handleEnd}\r\n            onTouchStart={handleStart}\r\n            onTouchEnd={handleEnd}\r\n\r\n            // class={props.class ?? props.className}\r\n            style={props.style}\r\n\r\n        >\r\n            <div class={[\"rangesliderFill block shadow-[inset_0_1px_3px_rgba(0,0,0,0.4)] absolute\",\r\n                () => $$(isHorizontal) ? 'h-full bg-[#7cb342] rounded-[10px] top-0' + ($$(reverse) ? ' right-0' : '') :\r\n                    ' w-full bg-[#7cb342] shadow-none bottom-0' + ($$(reverse) ? ' top-0' : ''),\r\n\r\n            ]} style={fillStyle} />\r\n            <div\r\n                ref={handleRef}\r\n                class={[\"rangesliderHandle bg-white border cursor-pointer inline-block absolute shadow-[0_1px_3px_rgba(0,0,0,0.4),0_-1px_3px_rgba(0,0,0,0.4)] border-solid border-[#ccc] \",\r\n                    () => $$(isHorizontal) ? 'w-[30px] h-[30px] rounded-[30px] top-2/4 after:content-[\"_\"] after:absolute after:w-4 after:h-4 after:bg-[#dadada] after:shadow-[0_1px_3px_rgba(0,0,0,0.4)_inset,0_-1px_3px_rgba(0,0,0,0.4)_inset] after:rounded-[50%] after:left-1.5 after:top-1.5 [transform:translate3d(-50%,-50%,0)]' :\r\n                        'absolute w-[30px] h-2.5 shadow-none -left-2.5',\r\n\r\n                ]}\r\n                onMouseDown={handleStart}\r\n                onTouchMove={handleDrag}\r\n                onTouchEnd={handleEnd}\r\n                onKeyDown={handleKeyDown}\r\n                style={handleStyle}\r\n                tabIndex={0}\r\n            >\r\n                {() => $$(showTooltip) ? (\r\n                    <div ref={tooltipRef} class={[\"rangesliderHandle-tooltip w-10 h-10 text-center absolute bg-[rgba(0,0,0,0.8)] font-[normal] text-sm transition-all duration-100 ease-[ease-in] rounded inline-block text-[white] after:content-[' _'] after:absolute after:w-0 after:h-0 select-none\",\r\n                        () => $$(isHorizontal) ? 'top-[-55px] after:border-t-8 after:border-t-[rgba(0,0,0,0.8)] after:border-x-8 after:border-x-transparent after:border-solid after:left-2/4 left-2/4 after:-bottom-2 after:[transform:translate3d(-50%,0,0)] [transform:translate3d(-50%,0%,0)]' :\r\n                            '-left-full top-2/4 after:border-l-8 after:border-l-[rgba(0,0,0,0.8)] after:border-y-8 after:border-y-transparent after:border-solid after:left-full after:top-3 [transform:translate3d(-50%,-50%,0)]',\r\n                        () => $$(reverse) ? ($$(isHorizontal) ? 'right-0' : 'top-0 bottom-[inherit]') : '',\r\n                    ]}>\r\n                        <span class='inline-block leading-[100%] mt-3'>{() => handleTooltip($$(sliderValue))}</span>\r\n                    </div>\r\n                ) : null}\r\n                <div class=\"rangesliderHandle-label select-none\">{formatLabel}</div>\r\n            </div>\r\n            {() => labels ? renderLabels(labelItems as any) : null}\r\n        </div>\r\n    )\r\n}\r\n\r\n"],"names":["$","$$","useEffect","value","useMemo","position","labels","jsx","labelItems","jsxs"],"mappings":";;;;AAMO,WAAS,WAAW,KAAqB;AAC5C,WAAO,IAAI,OAAO,CAAC,EAAE,gBAAgB,IAAI,OAAO,CAAC;AAAA,EACrD;AASO,WAAS,MAAM,OAAO,KAAK,KAAK;AACnC,WAAO,KAAK,IAAI,KAAK,IAAI,OAAO,GAAG,GAAG,GAAG;AAAA,EAC7C;ACOA,QAAM,YAAY;AAAA,IACd,aAAa;AAAA,MACT,YAAY;AAAA,QACR,WAAW;AAAA,QACX,WAAW;AAAA,QACX,kBAAkB;AAAA,QAClB,YAAY;AAAA,MAAA;AAAA,MAEhB,UAAU;AAAA,QACN,WAAW;AAAA,QACX,WAAW;AAAA,QACX,kBAAkB;AAAA,QAClB,YAAY;AAAA,MAAA;AAAA,IAChB;AAAA,EAER;AAEO,QAAM,SAAS,CAAC,UAA4D;AAC/E,UAAM;AAAA,MACF,MAAMA,KAAAA,EAAE,CAAC;AAAA,MACT,MAAMA,KAAAA,EAAE,GAAG;AAAA,MACX,OAAOA,KAAAA,EAAE,CAAC;AAAA,MACV,QAAQA,KAAAA,EAAE,CAAC;AAAA,MACX,cAAcA,KAAAA,EAAE,YAAY;AAAA,MAC5B,UAAUA,KAAAA,EAAE,IAAI;AAAA,MAChB,kBAAkBA,KAAAA,EAAE,KAAK;AAAA,MACzB,UAAUA,KAAAA,EAAE,KAAK;AAAA,MACjB,SAASA,KAAAA,EAAE,EAAE;AAAA,MACb,cAAcA,KAAAA,EAAE,EAAE;AAAA,MAClB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IAAA,IACA;AAEJ,UAAM,SAASA,KAAAA,EAAW,KAAK;AAC/B,UAAM,QAAQA,KAAAA,EAAU,CAAC;AACzB,UAAM,OAAOA,KAAAA,EAAU,CAAC;AACxB,UAAM,YAAYA,KAAAA,EAAA;AAClB,UAAM,YAAYA,KAAAA,EAAA;AAClB,UAAM,aAAaA,KAAAA,EAAA;AACnB,UAAM,YAAYA,KAAAA,EAAA;AAClB,UAAM,cAAcA,KAAAA,EAAEC,KAAAA,GAAG,KAAK,CAAC;AAC/B,UAAM,YAAYD,KAAAA,EAAE,CAAC;AACrB,UAAM,YAAYA,KAAAA,EAAE,CAAC;AAErBE,SAAAA,UAAU,MAAM;AACZ,kBAAYD,KAAAA,GAAG,KAAK,CAAC;AAAA,IACzB,CAAC;AACD,UAAM,gBAAgB,CAACE,WAA6B;AAChD,aAAO,gBAAgB,cAAcA,MAAK,IAAIA;AAAAA,IAClD;AAEA,UAAM,eAAe,MAAM;AACvB,UAAI,CAACF,KAAAA,GAAG,SAAS,KAAK,CAACA,KAAAA,GAAG,SAAS,GAAG;AAClC;AAAA,MACJ;AACA,YAAM,YAAY,WAAW,UAAU,YAAYA,KAAAA,GAAG,WAAW,CAAC,EAAE,SAAS;AAC7E,gBAAUA,KAAAA,GAAG,SAAS,EAAE,SAASA,QAAG,SAAS,CAAC,EAAE,CAAC;AACjD,gBAAUA,KAAAA,GAAG,SAAS,EAAE,SAASA,QAAG,SAAS,CAAC,EAAE,CAAC;AAEjD,YAAM,cAAc,WAAW;AAC/B,WAAK,UAAA,IAAc,CAAC;AAAA,IACxB;AAEA,UAAM,cAAc,CAAC,MAA+B;AAChD,eAAS,iBAAiB,aAAa,UAAU;AACjD,eAAS,iBAAiB,WAAW,SAAS;AAC9C,aAAO,IAAI;AACX,qDAAgB;AAAA,IACpB;AAEA,UAAM,aAAa,CAAC,MAA+B;AAC/C,QAAE,gBAAA;AACF,UAAI,CAAC,SAAU;AAEf,YAAM;AAAA;AAAA,QAEF,QAAQ,EAAE,WAAW,WAAW,QAAA;AAAA,MAAQ,IACxC;AAEJ,UAAI,cAAc,oBAAqB;AAEvC,kBAAY,SAAS,CAAC,CAAC;AAEvB,WAAI,uCAAW,SAAS,6BAA4B,QAAQ,OAAO;AAC/D,oBAAY,WAAW,QAAQ,KAAK,CAAC;AAAA,MACzC;AACA,2CAAWA,KAAAA,GAAG,WAAW,GAAG;AAAA,IAChC;AAEAC,SAAAA,UAAU,MAAM;AACZ,mBAAA;AACA,YAAM,iBAAiB,IAAI,eAAe,YAAY;AACtD,UAAID,KAAAA,GAAG,SAAS,GAAG;AACf,uBAAe,QAAQA,QAAG,SAAS,CAAC;AAAA,MACxC;AAEA,aAAO,MAAM;AACT,uBAAe,WAAA;AAAA,MACnB;AAAA,IACJ,CAAC;AAED,UAAM,YAAY,CAAC,MAA+B;AAC9C,aAAO,KAAK;AACZ,2DAAmB;AACnB,YAAMA,KAAAA,GAAG,WAAW,CAAC;AACrB,eAAS,oBAAoB,aAAa,UAAU;AACpD,eAAS,oBAAoB,WAAW,SAAS;AAAA,IACrD;AAEA,UAAM,gBAAgB,CAAC,MAAqB;AACxC,QAAE,eAAA;AACF,YAAM,EAAE,YAAY;AAGpB,cAAQ,SAAA;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AACD,sBAAa,CAACA,KAAAA,GAAG,KAAK,IAAM,CAACA,KAAAA,GAAG,IAAI,IAAM,CAACA,QAAG,GAAG,IAAM,CAACA,KAAAA,GAAG,GAAG,IAAM,CAACA,KAAAA,GAAG,KAAK,IAAM,CAACA,QAAG,IAAI,CAAE;AAC7F,+CAAWA,KAAAA,GAAG,WAAW,GAAG;AAC5B;AAAA,QACJ,KAAK;AAAA,QACL,KAAK;AACD,sBAAa,CAACA,KAAAA,GAAG,KAAK,IAAM,CAACA,KAAAA,GAAG,IAAI,IAAM,CAACA,QAAG,GAAG,IAAM,CAACA,KAAAA,GAAG,GAAG,IAAM,CAACA,KAAAA,GAAG,KAAK,IAAM,CAACA,QAAG,IAAI,CAAE;AAC7F,+CAAWA,KAAAA,GAAG,WAAW,GAAG;AAC5B;AAAA,MACJ;AAAA,IAER;AAEA,UAAM,uBAAuB,CAACE,QAAe,UAAU,UAAkB;AACrE,YAAM,aAAc,CAACF,KAAAA,GAAG,GAAG,IAAM,CAACA,KAAAA,GAAG,GAAG;AACxC,YAAM,aAAaE,SAAS,CAACF,KAAAA,GAAG,GAAG;AACnC,YAAM,aAAa,aAAa;AAShC,YAAM,MAAM,KAAK,MAAM,cAAc,UAAW,CAACA,KAAAA,GAAG,SAAS,IAAM,CAACA,QAAG,KAAK,EAAG;AAE/E,aAAO;AAAA,IACX;AAEA,UAAM,eAAeG,KAAAA,QAAQ,MAAMH,KAAAA,GAAG,WAAW,MAAM,YAAY;AAEnE,UAAM,uBAAuB,CAAC,QAAwB;AAClD,YAAM,aAAa,MAAM,KAAK,GAAI,CAACA,KAAAA,GAAG,KAAK,CAAE,KAAM,CAACA,KAAAA,GAAG,KAAK,KAAM;AAClE,YAAM,UAAW,CAACA,QAAG,IAAI,IAAK,KAAK,MAAO,cAAe,CAACA,KAAAA,GAAG,GAAG,IAAM,CAACA,QAAG,GAAG,KAAQ,CAACA,KAAAA,GAAG,IAAI,CAAE;AAC/F,YAAM,SAASA,KAAAA,GAAG,YAAY,IAAI,UAAW,CAACA,QAAG,GAAG,IAAM,CAACA,QAAG,GAAG,IAAK;AACtE,aAAO,MAAM,QAAS,CAACA,KAAAA,GAAG,GAAG,GAAK,CAACA,KAAAA,GAAG,GAAG,CAAE;AAAA,IAC/C;AAEA,UAAM,WAAW,CAAC,MAA+B;AAC7C,YAAM,kBAAkB,UAAU,YAAYA,KAAAA,GAAG,WAAW,CAAC,EAAE;AAC/D,YAAM,iBAAiBA,KAAAA,GAAG,OAAO,IAC3B,UAAU,YAAYA,QAAG,WAAW,CAAC,EAAE,mBACvC,UAAU,YAAYA,KAAAA,GAAG,WAAW,CAAC,EAAE;AAC7C,YAAM,wBAAwB,SAAS,WAAW,eAAe,CAAC;AAClE,YAAM,aAAa,EAAE,aAAa,KAC3B,EAAiB,qBAAqB,IACtC,EAAE,QAAQ,CAAC,EAAY,qBAAqB;AACnD,YAAM,YAAYA,KAAAA,GAAG,SAAS,EAAG,sBAAA,EAAwB,cAAc;AAKvE,YAAM,MAAMA,KAAAA,GAAG,OAAO,IAChB,YAAY,aAAc,CAACA,QAAG,IAAI,IAClC,aAAa,YAAa,CAACA,KAAAA,GAAG,IAAI;AAExC,kBAAY,qBAAqB,GAAG,CAAC;AACrC,aAAO;AAAA,IACX;AAEA,UAAM,cAAc,CAAC,KAAa,UAAU,UAAU;AAClD,YAAME,SAAQ,qBAAqB,GAAG;AACtC,YAAME,YAAW,qBAAqBF,QAAO,OAAO;AAQpD,YAAM,YAAYF,KAAAA,GAAG,YAAY,IAAII,YAAY,CAACJ,KAAAA,GAAG,IAAI,IAAKI;AAC9D,YAAM,UAAUJ,KAAAA,GAAG,YAAY,IAAI,YAAa,CAACA,KAAAA,GAAG,KAAK,IAAK;AAG9D,aAAO;AAAA,QACH,MAAM;AAAA,QACN,QAAQ;AAAA,QACR,OAAO;AAAA,MAAA;AAAA,IAEf;AAEA,UAAM,eAAe,CAACK,YAClBC,2BAAAA;AAAAA,MAAC;AAAA,MAAA;AAAA,QAAG,KAAK;AAAA,QAAW,OAAO;AAAA,UAAC;AAAA,UACxB,MAAMN,KAAAA,GAAG,YAAY,IAAI,4BAA4B;AAAA,QAAA;AAAA,QAGpD,UAAA,OAAO,OAAOA,KAAAA,GAAGK,OAAM,CAAC;AAAA,MAAA;AAAA,IAAA;AAKjC,UAAM,aAAaF,KAAAA,QAAQ,MAAM;AAClBH,WAAAA,GAAG,KAAK;AAEnB,UAAIO,cAAa,CAAA;AACjB,UAAI,YAAY,OAAO,KAAKP,QAAG,MAAM,CAAC,EAAE,IAAI,CAAA,MAAK,CAAC,CAAC;AAEnD,UAAI,UAAU,SAAS,GAAG;AACtB,oBAAY,UAAU,KAAK,CAAC,GAAG,MAAOA,QAAG,OAAO,IAAI,IAAI,IAAI,IAAI,CAAE;AAElE,iBAAS,OAAO,WAAW;AACvB,gBAAM,gBAAgB,qBAAqB,GAAG;AAE9C,gBAAM,cAAc,YAAY,eAAe,CAACA,KAAAA,GAAG,YAAY,CAAC;AAChE,gBAAM,aAAa;AAAA,YACf,CAAC,UAAU,YAAYA,KAAAA,GAAG,WAAW,CAAC,EAAE,SAAS,GAAG,GAAG,YAAY,KAAK;AAAA,UAAA;AAG5E,kBAAQ,IAAI,UAAUA,KAAAA,GAAG,KAAK,GAAG,YAAY,KAAK;AAElDO,sBAAW;AAAA,YACPD,2BAAAA;AAAAA,cAAC;AAAA,cAAA;AAAA,gBACG,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,kBAMH;AAAA,kBACA,MAAMN,QAAG,YAAY,IAAI,KAAK;AAAA;AAAA;AAAA,gBAAA;AAAA,gBAIlC,cAAY;AAAA,gBAEZ,eAAe;AAAA,gBACf,aAAa;AAAA,gBACb,OAAO;AAAA,gBAEN,UAAAA,KAAAA,GAAG,MAAM,EAAE,GAAG;AAAA,cAAA;AAAA,YAAA;AAAA,UACnB;AAAA,QAER;AAAA,MACJ;AACA,aAAOO;AAAAA,IACX,CAAC;AAGD,UAAM,cAAcJ,KAAAA,QAAQ,MAAMH,KAAAA,GAAG,OAAO,MAAMA,KAAAA,GAAG,MAAM,KAAKA,QAAG,eAAe,EAAE;AAEpF,UAAM,SAASG,KAAAA,QAAQ,MAAM;AACzB,YAAM,cAAc,qBAAqBH,KAAAA,GAAG,WAAW,CAAC;AACxD,aAAO,YAAYA,QAAG,WAAW,CAAC;AAAA,IACtC,CAAC;AACD,UAAM,YAAYG,KAAAA,QAAQ,MAAM;AAC5B,YAAM,YAAY,UAAU,YAAYH,KAAAA,GAAG,WAAW,CAAC,EAAE;AACzD,aAAO,EAAE,CAACA,QAAG,SAAS,CAAC,GAAG,GAAGA,KAAAA,GAAG,MAAM,EAAE,IAAI,KAAA;AAAA,IAChD,CAAC;AACD,UAAM,cAAcG,KAAAA,QAAQ,MAAM;AAC9B,YAAM,YAAYA,KAAAA,QAAQ,MAAMH,KAAAA,GAAG,OAAO,IACpC,UAAU,YAAYA,KAAAA,GAAG,WAAW,CAAC,EAAE,mBACvC,UAAU,YAAYA,KAAAA,GAAG,WAAW,CAAC,EAAE,SAAS;AACtD,aAAO,EAAE,CAACA,QAAG,SAAS,CAAC,GAAG,GAAGA,KAAAA,GAAG,MAAM,EAAE,MAAM,KAAA;AAAA,IAClD,CAAC;AAED,WACIQ,2BAAAA;AAAAA,MAAC;AAAA,MAAA;AAAA,QACG,KAAK;AAAA,QACL,OAAO;AAAA,UACH;AAAA,UACA,MAAM,eAAeR,QAAG,WAAW,CAAC;AAAA,UACpC,MAAMA,QAAG,OAAO,IAAI,wBAAwB;AAAA,UAC5C,MAAMA,QAAG,YAAY,IAAI,uBACrB;AAAA,UACJ,MAAM,SAAS,MAAM;AAAA,QAAA;AAAA,QAEzB,aAAa;AAAA,QACb,WAAW;AAAA,QACX,cAAc;AAAA,QACd,YAAY;AAAA,QAGZ,OAAO,MAAM;AAAA,QAGb,UAAA;AAAA,UAAAM,+BAAC,SAAI,OAAO;AAAA,YAAC;AAAA,YACT,MAAMN,KAAAA,GAAG,YAAY,IAAI,8CAA8CA,KAAAA,GAAG,OAAO,IAAI,aAAa,MAC9F,+CAA+CA,KAAAA,GAAG,OAAO,IAAI,WAAW;AAAA,UAAA,GAE7E,OAAO,WAAW;AAAA,UACrBQ,2BAAAA;AAAAA,YAAC;AAAA,YAAA;AAAA,cACG,KAAK;AAAA,cACL,OAAO;AAAA,gBAAC;AAAA,gBACJ,MAAMR,KAAAA,GAAG,YAAY,IAAI,6RACrB;AAAA,cAAA;AAAA,cAGR,aAAa;AAAA,cACb,aAAa;AAAA,cACb,YAAY;AAAA,cACZ,WAAW;AAAA,cACX,OAAO;AAAA,cACP,UAAU;AAAA,cAET,UAAA;AAAA,gBAAA,MAAMA,KAAAA,GAAG,WAAW,mCAChB,OAAA,EAAI,KAAK,YAAY,OAAO;AAAA,kBAAC;AAAA,kBAC1B,MAAMA,QAAG,YAAY,IAAI,oPACrB;AAAA,kBACJ,MAAMA,KAAAA,GAAG,OAAO,IAAKA,KAAAA,GAAG,YAAY,IAAI,YAAY,2BAA4B;AAAA,gBAAA,GAEhF,UAAAM,2BAAAA,IAAC,QAAA,EAAK,OAAM,oCAAoC,UAAA,MAAM,cAAcN,KAAAA,GAAG,WAAW,CAAC,EAAA,CAAE,EAAA,CACzF,IACA;AAAA,gBACJM,2BAAAA,IAAC,OAAA,EAAI,OAAM,uCAAuC,UAAA,YAAA,CAAY;AAAA,cAAA;AAAA,YAAA;AAAA,UAAA;AAAA,UAEjE,MAAM,SAAS,aAAa,UAAiB,IAAI;AAAA,QAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAG9D;;;;"}